<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>台灣落地課安排（白天模式 v4）</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f7f8fb;
    --paper:#ffffff;
    --ink:#1b2430;
    --muted:#6b7280;
    --border:#e5e7eb;
    --accent:#2563eb;
    --chip:#f1f5f9;
    --shadow: 0 6px 24px rgba(16,24,40,.06);
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:'Noto Sans TC',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  a{color:var(--accent);text-decoration:none}
  .wrap{max-width:1200px;margin:28px auto;padding:0 20px 56px}
  header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
  header h1{font-size:26px;margin:0;font-weight:800;letter-spacing:.2px}
  .tag{font-size:12px;background:linear-gradient(90deg,var(--accent),#60a5fa);color:#fff;padding:7px 12px;border-radius:999px;font-weight:700;box-shadow:var(--shadow)}
  .layout{display:grid;grid-template-columns:1.4fr .9fr;gap:20px}
  .stack{display:grid;gap:16px}
  .card{background:var(--paper);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
  .title{font-weight:800;font-size:15px;margin:0 0 10px 0;color:#0f172a;letter-spacing:.3px}
  dl.kv{display:grid;grid-template-columns:140px 1fr;row-gap:12px;margin:0}
  dl.kv dt{color:var(--muted)}
  dl.kv dd{margin:0}
  /* table */
  table{width:100%;border-collapse:separate;border-spacing:0;font-size:14px}
  thead th{position:sticky;top:0;background:#fafafa;border-bottom:1px solid var(--border);padding:12px 12px;text-align:left}
  tbody td{padding:12px 12px;border-bottom:1px dashed var(--border)}
  tbody tr:hover{background:#fafcff}
  .right{text-align:right}
  .money{font-variant-numeric:tabular-nums}
  .total-row td{border-bottom:none;border-top:2px solid var(--ink);font-weight:800}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  /* sticky summary aside */
  aside.summary{position:sticky;top:20px;display:grid;gap:16px;height:fit-content}
  .kpi{display:flex;align-items:baseline;gap:10px}
  .kpi .num{font-weight:800;font-size:28px;letter-spacing:.4px}
  .kpi .lbl{color:var(--muted)}
  .kpi.ok{color:var(--accent)}
  .div{height:1px;background:var(--border);margin:4px 0}
  /* timeline */
  .timeline{position:relative;margin:0;padding:8px 0 0 0;list-style:none}
  .timeline:before{content:"";position:absolute;left:14px;top:0;bottom:0;width:2px;background:var(--border)}
  .timeline li{display:grid;grid-template-columns:28px 1fr;gap:12px;padding:12px 0}
  .dot{width:12px;height:12px;border-radius:50%;margin-top:6px;background:var(--accent)}
  .pill{display:inline-block;padding:4px 10px;border-radius:999px;background:#eef2ff;border:1px solid #dbeafe;color:#1e3a8a;font-size:12px}
  /* chart */
  .legend{display:grid;grid-template-columns:1fr;gap:8px;margin-top:10px}
  .legend .item{display:flex;align-items:center;gap:8px;font-size:13px;color:#0f172a}
  .swatch{width:12px;height:12px;border-radius:3px;display:inline-block}
  @media (max-width: 980px){
    .layout{grid-template-columns:1fr}
    aside.summary{position:relative;top:auto}
    thead th{position:static}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>台灣落地課安排</h1>
      <span class="tag">3天2夜｜3人</span>
    </header>

    <div class="layout">
      <!-- 左：主要內容 -->
      <div class="stack">
        <!-- 基本設定 -->
        <section class="card">
          <h2 class="title">基本設定</h2>
          <dl class="kv">
            <dt>地點</dt><dd>深圳</dd>
            <dt>人數</dt><dd>3 人</dd>
            <dt>天數</dt><dd>3 天 2 夜</dd>
            <dt>學生</dt><dd>50 人</dd>
          </dl>
        </section>

        <!-- 費用預估 -->
        <section class="card">
          <h2 class="title">費用預估</h2>
          <table class="money">
            <thead>
              <tr><th>項目</th><th>說明</th><th class="right">金額 (NTD)</th></tr>
            </thead>
            <tbody>
              <tr><td>機票來回</td><td>台北 ↔ 深圳｜8,000/人 × 3</td><td class="right">24,000</td></tr>
              <tr><td>酒店住宿</td><td>中山雅樂軒飯店｜5,800/天 × 2 間 × 3 晚</td><td class="right">34,800</td></tr>
              <tr><td>場地費</td><td>Spaceco 中山國小｜13,500/天 × 2 天</td><td class="right">27,000</td></tr>
              <tr><td>餐食</td><td>4 天 3 夜｜中餐輕食、晚餐</td><td class="right">30,000</td></tr>
              <tr><td>交通</td><td>市內交通與雜支</td><td class="right">5,000</td></tr>
              <tr class="total-row">
                <td colspan="2">總計</td>
                <td class="right">120,800</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- 行程規劃 -->
        <section class="card">
          <h2 class="title">行程規劃（Timeline）</h2>
          <ul class="timeline">
            <li>
              <span class="dot"></span>
              <div>
                <div><strong>Day 1</strong>｜落地</div>
                <div class="row" style="margin-top:6px">
                  <span class="pill">飛機：落地</span>
                  <span class="pill">酒店：一晚</span>
                  <span class="pill">教室：x</span>
                  <span class="pill">餐食：晚餐</span>
                </div>
              </div>
            </li>
            <li>
              <span class="dot"></span>
              <div>
                <div><strong>Day 2</strong>｜課程</div>
                <div class="row" style="margin-top:6px">
                  <span class="pill">飛機：x</span>
                  <span class="pill">酒店：一晚</span>
                  <span class="pill">教室：一天</span>
                  <span class="pill">餐食：中餐輕食、晚餐</span>
                </div>
              </div>
            </li>
            <li>
              <span class="dot"></span>
              <div>
                <div><strong>Day 3</strong>｜課程</div>
                <div class="row" style="margin-top:6px">
                  <span class="pill">飛機：x</span>
                  <span class="pill">酒店：一晚</span>
                  <span class="pill">教室：一天</span>
                  <span class="pill">餐食：中餐輕食、晚餐</span>
                </div>
              </div>
            </li>
            <li>
              <span class="dot"></span>
              <div>
                <div><strong>Day 4</strong>｜回深圳</div>
                <div class="row" style="margin-top:6px">
                  <span class="pill">飛機：回程</span>
                  <span class="pill">酒店：x</span>
                  <span class="pill">教室：x</span>
                  <span class="pill">餐食：x</span>
                </div>
              </div>
            </li>
          </ul>
        </section>
      </div>

      <!-- 右：摘要 / KPI & CHART -->
      <aside class="summary">
        <section class="card">
          <h2 class="title">總花費</h2>
          <div class="kpi"><span class="num">NT$120,800</span><span class="lbl">總計</span></div>
          <div class="div"></div>
          <div class="kpi" style="color:var(--accent)">
            <span class="num">NT2,416</span><span class="lbl">平均每人（50 人）</span>
          </div>
          <div class="kpi"><span class="num">50 人</span><span class="lbl">學生</span></div>
        </section>

        <section class="card">
          <h2 class="title">費用結構（Chart）</h2>
          <canvas id="pie" width="420" height="260" aria-label="費用比例圓餅圖"></canvas>
          <div id="legend" class="legend"></div>
        </section>
      </aside>
    </div>
  </div>

<script>
  // Pie chart without external libraries
  (function() {
    const data = [24000, 34800, 27000, 30000, 5000];
    const labels = ['機票', '住宿', '場地', '餐食', '交通'];
    const colors = ["#3b82f6","#a78bfa","#22c55e","#f59e0b","#ef4444"];
    const total = data.reduce((a,b)=>a+b,0);

    const canvas = document.getElementById('pie');
    const ctx = canvas.getContext('2d');
    const cx = canvas.width/2;
    const cy = canvas.height/2;
    const radius = Math.min(cx, cy) - 10;

    let startAngle = -Math.PI/2;
    data.forEach((v, i) => {
      const slice = (v/total) * Math.PI * 2;
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.arc(cx, cy, radius, startAngle, startAngle + slice);
      ctx.closePath();
      ctx.fillStyle = colors[i];
      ctx.fill();
      startAngle += slice;
    });

    // Labels
    startAngle = -Math.PI/2;
    ctx.fillStyle = "#111827";
    ctx.font = "12px 'Noto Sans TC', sans-serif";
    data.forEach((v,i)=>{
      const mid = startAngle + (v/total)*Math.PI;
      const tx = cx + Math.cos(mid) * (radius*0.6);
      const ty = cy + Math.sin(mid) * (radius*0.6);
      const pct = Math.round(v/total*100);
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText(pct + "%", tx, ty);
      startAngle += (v/total)*Math.PI*2;
    });

    // Legend
    const legend = document.getElementById('legend');
    labels.forEach((lbl, i) => {
      const item = document.createElement('div');
      item.className = 'item';
      const sw = document.createElement('span');
      sw.className = 'swatch';
      sw.style.background = colors[i];
      const text = document.createElement('span');
      const pct = Math.round(data[i]/total*100);
      text.textContent = `${lbl}：${data[i].toLocaleString()}（${pct}%）`;
      item.appendChild(sw);
      item.appendChild(text);
      legend.appendChild(item);
    });
  })();
</script>
</body>
</html>
